<div class="page-header mb-6">
  <div class="flex flex-col gap-1">
    <h1 class="page-title"><%= @repository.url %></h1>
    <p class="text-subtle">Average Score: <span class="text-primary font-medium"><%= @repository.code_files.average(:overall_grade).round(2) %></span></p>
  </div>
  <div class="flex gap-2">
    <%= link_to 'Edit Repository', edit_repository_path(@repository), class: 'btn btn--secondary' %>
    <%= link_to 'Back to Repositories', repositories_path, class: 'btn' %>
  </div>
</div>

<div class="metrics-grid mb-8">
  <div class="card metric-card">
    <h3 class="metric-title">Overall Score</h3>
    <p class="metric-value"><%= @repository.code_files.average(:overall_grade).round(2) %></p>
  </div>
  <div class="card metric-card">
    <h3 class="metric-title">Security Score</h3>
    <p class="metric-value"><%= @repository.code_files.average(:security_grade).round(2) %></p>
  </div>
  <div class="card metric-card">
    <h3 class="metric-title">Performance Score</h3>
    <p class="metric-value"><%= @repository.code_files.average(:performance_grade).round(2) %></p>
  </div>
  <div class="card metric-card">
    <h3 class="metric-title">Refactoring Score</h3>
    <p class="metric-value"><%= @repository.code_files.average(:refactoring_grade).round(2) %></p>
  </div>
</div>

<div class="mb-4">
  <h2 class="section-title">Files Analysis</h2>
  <%= turbo_frame_tag 'code-files', src: repository_code_files_path(@repository) %>
</div>
